---
layout: post
title: kafka使用
description: 大数据专题
category: blog
---
    
    
## 一 概述

   Kafka是由LinkedIn开发的一个开源的分布式消息发布-订阅系统，使用Scala编写，它以可水平扩展和高吞吐率而被广泛使用的。

###  1.1 使用消息系统的目的
 
   + 解耦：消息系统在处理过程中间插入了一个隐含的、基于数据的接口层，两边的处理过程都要实现这一接口。这允许你独立的扩展或修改两边的处理过程，只要  确保它们遵守同样的接口约束。
   + 冗余：有些情况下，处理数据的过程会失败。除非数据被持久化，否则将造成丢失。消息队列把数据进行持久化直到它们已经被完全处理，通过这一方式规避了数据丢失风险。
   + 扩展性：消息队列解耦了你的处理过程，所以增大消息入队和处理的频率是很容易的，只要另外增加处理过程即可。不需要改变代码、不需要调节参数
   + 可恢复性：系统的一部分组件失效时，不会影响到整个系统。消息队列降低了进程间的耦合度，所以即使一个处理消息的进程挂掉，加入队列中的消息仍然可以在系统恢复后被处理。
   + 顺序保证：在大多使用场景下，数据处理的顺序都很重要。大部分消息队列本来就是排序的，并且能保证数据会按照特定的顺序来处理。Kafka保证一个Partition内的消息的有序性。
   + 异步通信：消息队列提供了异步处理机制，允许用户把一个消息放入队列，但并不立即处理它.
   
###  1.2  kafka优点
   
   1. 时间复杂度低: 以时间复杂度为O(1)的方式提供消息持久化能力，即使对TB级以上数据也能保证常数时间复杂度的访问性能。
   2. 高吞吐率: 即使在非常廉价的商用机器上也能做到单机支持每秒100K条以上消息的传输
   3. 顺序性保障:支持Kafka Server间的消息分区，及分布式消费，同时保证每个Partition内的消息顺序传输。
   4. 同时支持离线数据处理和实时数据处理。
   5. 支持在线水平扩展
 
## 二 kafka 应用及组成  
 应用场景    
 ![kafka应用场景](/images/blog/kafka-applysence.png)    

 <h1>组成</h1>    

 ![kafka组成](/images/blog/kafka-consist.png)    
 
 + Broker
    Kafka集群包含一个或多个服务器，这种服务器被称为broker。    
+  Topic    
   每条发布到Kafka集群的消息都有一个类别，这个类别被称为Topic。（物理上不同Topic的消息分开存储，逻辑上一个Topic的消息虽然   保存于一个或多个broker上,消费数据而不必关心数据存于何处）    
+   Partition
  是物理上的概念，每个Topic包含一个或多个Partition       
+   Producer
  负责发布消息到Kafka broker    
+   Consumer
   消息消费者，向Kafka broker读取消息的客户端    
+   Consumer Group
    每个Consumer属于一个特定的Consumer Group（可为每个Consumer指定group name，若不指定group name则属于默认的group）。
    

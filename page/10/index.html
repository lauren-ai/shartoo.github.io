<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://shartoo.github.com').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://shartoo.github.com/page/10/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="shartoo">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://shartoo.github.com/page/10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://shartoo.github.com/2019/12/23/2014-05-11-javafoundamention1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shartoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/23/2014-05-11-javafoundamention1/" class="post-title-link" itemprop="url">Java基础笔记-Java内存区域</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-23 18:45:59 / Modified: 17:55:14" itemprop="dateCreated datePublished" datetime="2019-12-23T18:45:59+08:00">2019-12-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          关于Java JVM的一些学习笔记
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/12/23/2014-05-11-javafoundamention1/">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://shartoo.github.com/2019/12/23/2013-05-24-datamining-classfy-main/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shartoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/23/2013-05-24-datamining-classfy-main/" class="post-title-link" itemprop="url">数据挖掘方法之分类</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-23 18:45:59 / Modified: 17:55:14" itemprop="dateCreated datePublished" datetime="2019-12-23T18:45:59+08:00">2019-12-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          数据挖掘专栏
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/12/23/2013-05-24-datamining-classfy-main/">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://shartoo.github.com/2019/12/23/2013-05-16-datamining-logicregressionsample/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shartoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/23/2013-05-16-datamining-logicregressionsample/" class="post-title-link" itemprop="url">数据挖掘方法之六：解读逻辑回归</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-23 18:45:59 / Modified: 17:55:14" itemprop="dateCreated datePublished" datetime="2019-12-23T18:45:59+08:00">2019-12-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          数据挖掘专栏
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/12/23/2013-05-16-datamining-logicregressionsample/">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://shartoo.github.com/2019/12/23/2013-05-12-datamining-logicregression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shartoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/23/2013-05-12-datamining-logicregression/" class="post-title-link" itemprop="url">数据挖掘方法之五：逻辑回归</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-23 18:45:59 / Modified: 17:55:14" itemprop="dateCreated datePublished" datetime="2019-12-23T18:45:59+08:00">2019-12-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          数据挖掘专栏
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/12/23/2013-05-12-datamining-logicregression/">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://shartoo.github.com/2019/12/23/2013-05-04-datamining-mutillinerandselect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shartoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/23/2013-05-04-datamining-mutillinerandselect/" class="post-title-link" itemprop="url">数据挖掘方法之四：多重共线性及变量选择方法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-23 18:45:59 / Modified: 17:55:14" itemprop="dateCreated datePublished" datetime="2019-12-23T18:45:59+08:00">2019-12-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          数据挖掘专栏
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/12/23/2013-05-04-datamining-mutillinerandselect/">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://shartoo.github.com/2019/12/23/2013-04-24-datamining-mutilregression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shartoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/23/2013-04-24-datamining-mutilregression/" class="post-title-link" itemprop="url">2013-04-24-datamining-mutilregression</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-23 18:45:59 / Modified: 20:54:36" itemprop="dateCreated datePublished" datetime="2019-12-23T18:45:59+08:00">2019-12-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>title: 数据挖掘方法之三：多元回归模型 date: 2013-04-24 17:01:34 categories: - 数据挖掘</p>
<h2 id="一-概念">一 概念</h2>
<p>前面介绍了一个预测变量和一个回应变量的回归，但数据挖掘通常对一个回应变量和多个预测变量之间的关系更感兴趣，数据中可能有很多变量都与目标（回应）变量有线性关系，多元回归模型可以更加精确的预测这些关联。<br> 多元回归模型如下：</p>
<p><span class="math display">\[
y= b_0+b_1x_1+b_2x_2+....+e
\]</span></p>
<p>其中 <span class="math inline">\(b0，b1，b2.....\)</span> 是模型参数，为常数，可以通过最小二乘法估计。关于误差项e和回应变量y的假设与简单线性回归模型一样。</p>
<h2 id="二-多元回归的推断">二 多元回归的推断</h2>
<p>主要有： 1. t检验，用来对预测变量xi和回应变量y之间的关系进行推断</p>
<ol start="2" type="1">
<li><p>F检验，用来对整个回归模型的显著性进行检验</p></li>
<li><p><span class="math inline">\(b_i\)</span> ,第i个预测变量系数的置信区间</p></li>
<li><p>回应变量y的均值的置信区间，用于预测变量 <span class="math inline">\(x1,x2,x3,..\)</span> 取特定值时，对回应变量y的均值进行估计</p></li>
</ol>
<h3 id="y和-x_i之间关系的t检验">2.1 y和 <span class="math inline">\(x_i\)</span>之间关系的t检验</h3>
<p>假设检验如下：</p>
<ul>
<li>H0: bi=0</li>
<li>H1: bi!=0</li>
</ul>
<p>这些假设的模型的唯一区别是第i项是否存在，其他项都是相同的。</p>
<p><strong>实例</strong>： 营养级别和糖之间关系的t检验</p>
<ul>
<li>H0: b1=0;模型 <span class="math inline">\(y=b_0+b_2(纤维)+e\)</span></li>
<li>H1:b1!=0;模型：<span class="math inline">\(y=b_0+b_1(糖)+b_2(纤维)+e\)</span></li>
</ul>
<p>还是使用数据集：谷物(在本系列文章第二篇中有下载地址)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#数据集存储在sugar中  </span><br><span class="line">#线性拟合  </span><br><span class="line">&gt;mutil_regre&lt;-lm(data&#x3D;sugar,rating~sugars+fiber)  </span><br><span class="line">#查看  </span><br><span class="line">&gt;summary(mutil_regre)    </span><br><span class="line">Call:  </span><br><span class="line">  lm(formula &#x3D; rating ~ sugars + fiber, data &#x3D; sugar)  </span><br><span class="line">  Residuals:  </span><br><span class="line">        Min      1Q  Median      3Q     Max   </span><br><span class="line">    -12.133  -4.247  -1.031   2.620  16.398   </span><br><span class="line"></span><br><span class="line">    Coefficients:  </span><br><span class="line">                Estimate Std. Error t value  </span><br><span class="line">    (Intercept)  51.6097     1.5463  33.376  </span><br><span class="line">    sugars       -2.1837     0.1621 -13.470  </span><br><span class="line">    fiber         2.8679     0.3023   9.486  </span><br><span class="line">                Pr(&gt;|t|)      </span><br><span class="line">    (Intercept)  &lt; 2e-16 ***  </span><br><span class="line">    sugars       &lt; 2e-16 ***  </span><br><span class="line">    fiber       2.02e-14 ***  </span><br><span class="line">    ---  </span><br><span class="line">    Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1  </span><br><span class="line"></span><br><span class="line">    Residual standard error: 6.219 on 74 degrees of freedom  </span><br><span class="line">    Multiple R-squared:  0.8092,    Adjusted R-squared:  0.804   </span><br><span class="line">    F-statistic: 156.9 on 2 and 74 DF,  p-value: &lt; 2.2e-16</span><br></pre></td></tr></table></figure>
<p>可以得到，糖对应的稀疏为 <span class="math inline">\(b_1=-2.1837\)</span> ,对应的标准差为 <span class="math inline">\(S_{bi}=0.1621\)</span></p>
<p>T对应的t统计量，也即检验的统计量为: <span class="math inline">\(t=\frac{b_1}{S_{b1}}=\frac{-2.1837}{0.1621}=-13.4713\)</span></p>
<p>P值对应的是t统计量的p值。也即: <span class="math inline">\(p=P(\|t\|&gt;tobs)=P(\|t\|&gt;-13.4713)\)</span> 约等于0. 使用p值来检验假设，当p值很小时就可以拒绝原假设。</p>
<h3 id="整体回归模型的显著性水平检验f检验">2.2 整体回归模型的显著性水平检验：F检验</h3>
<p><strong>检验</strong> 是分别对每个变量，糖，纤维，....逐个检验与回应变量线性关系。即{营养级别|糖}，{营养级别|纤维}，....</p>
<p><strong>F检验</strong> 是对所有变量一起检测与回应变量关系，即{营养级别|糖，纤维，......}</p>
<p>F检验的前提是</p>
<ul>
<li><p>H0: b0=b1=......=0 也即模型为：<span class="math inline">\(y=b_0+e\)</span></p></li>
<li><p>H1:至少存在一个bi不等于零</p></li>
</ul>
<p>备选假设H1并不要求任何回归系数都不是零，而是当备选假设为真时，存在一个回归系数不是零。因此，F检验的备选假设并没有唯一确定一个模型，当一个、几个或者所有回归系数都不是零时，备选假设都是成立的。</p>
<p>F统计量为：</p>
<p><span class="math display">\[
    F= F_{obs}=\frac{MSR}{MSE} 服从F_{m,n-m-1}分布
\]</span></p>
<p><strong>如何理解</strong>：MSE（误差平方和均值）能很好的估计总体变异 <span class="math inline">\(σ^2\)</span>（不论原假设是否为真），而MSR只有当原假设为真时才是 <span class="math inline">\(σ^2\)</span> 的优良统计量，因而只有在原假设为真的情况下MSR和MSE才会比较接近，也即F很小的时候，有足够的争取表明原假设为真。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;#查看方差分析表  </span><br><span class="line">&gt;anova(mutil_regre)  </span><br><span class="line">Analysis of Variance Table  </span><br><span class="line"></span><br><span class="line">Response: rating  </span><br><span class="line">          Df Sum Sq Mean Sq F value    Pr(&gt;F)      </span><br><span class="line">sugars     1 8654.7  8654.7 223.774 &lt; 2.2e-16 ***  </span><br><span class="line">fiber      1 3480.0  3480.0  89.978 2.023e-14 ***  </span><br><span class="line">Residuals 74 2862.0    38.7                        </span><br><span class="line">---  </span><br><span class="line">Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span><br></pre></td></tr></table></figure>
<p><font color="blue">注意：</font>方差分析表只给出了均方误差(MSE=Mean Sq=38.7) 而第一步中t检验中查看线性拟合时已经直接给出了F统计量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F-statistic: 156.9 on 2 and 74 DF,  p-value: &lt; 2.2e-16</span><br></pre></td></tr></table></figure>
<p>其中的p值小于任何合理的显著性水平所要求的值，因而拒绝原假设。</p>
<h3 id="特定回归系数的置信区间">2.3 特定回归系数的置信区间</h3>
<p>可以为某个回归系数构造一个 100(1-a)%的置信区间，与简单线性回归无异。</p>
<h3 id="给定x1x2x3....下y均值的置信区间">2.4 给定x1,x2,x3,....下，y均值的置信区间</h3>
<p>与简单线性回归类似，只不过变量增多。变为如：谷物为5.00克的糖和5.00克纤维时，营养级别的均值分布。</p>
<h2 id="三-多元回归的三个重要参数">三 多元回归的三个重要参数</h2>
<h3 id="调整-r2-对包含无用预测变量的惩罚模式">3.1 调整 <span class="math inline">\(R^2\)</span> ：对包含无用预测变量的惩罚模式</h3>
<p>往模型里增加一个变量会增加决定系数<span class="math inline">\(R^2\)</span> 的值，不管这个变量是否有用。为了模型的简洁性，需要找到某种方法来惩罚包含无用预测变量模型 <span class="math inline">\(R^2\)</span> 的值，此即通常所说的[调整 <span class="math inline">\(R^2\)</span> ],其表达式如下：</p>
<p><span class="math display">\[
   R^2_{adj}= 1-(1-R^2)\frac{n-1}{n-m-1}
\]</span></p>
<p>如果[<em>调整</em> <span class="math inline">\(R^2\)</span> ]比 <span class="math inline">\(R^2\)</span> 小很多，则表明模型中至少有一个变量是多余的，分析人员需要考虑剔除。</p>
<h3 id="序贯的误差平方和-sequential-sums-of-squares">3.2 序贯的误差平方和 <em>（sequential sums of squares）</em></h3>
<p>序贯的误差平方和代表SSR中回归平方和的部分，SSR代表通过回应变量和一组预测变量的线性关系对总体变异解释的部分。序贯的误差平方和把SSR划分成各个唯一的SSR部分，分别由某个特定的预测变量来描述。因此，序贯的误差平方和的值取决于变量输入模型中的次序。下表是某种次序的序贯的武昌平方和，可以看出其实是对糖含量和营养级别的简单回归分析得到的SSR值。</p>
<p>模型：</p>
<p><span class="math display">\[
    y = b_0+b_1(糖)+b_2(纤维)+b_3(货架1)+b_4(货架4)+e
\]</span></p>
<p>的序贯平方和</p>
<table>
<thead>
<tr class="header">
<th>来源</th>
<th>DF</th>
<th>Seq SS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>糖</td>
<td>1</td>
<td>8701.7</td>
</tr>
<tr class="even">
<td>纤维</td>
<td>1</td>
<td>3416.1</td>
</tr>
<tr class="odd">
<td>货架1</td>
<td>1</td>
<td>0.3</td>
</tr>
<tr class="even">
<td>货架2</td>
<td>1</td>
<td>152.4</td>
</tr>
</tbody>
</table>
<p>从表中可以看到第三个序贯误差平方和是对货架1的指示标量，值为0.3 ，它代表了营养级别中，在位置因素作用下货架1的变化率，这里糖和纤维的变化率已经被提取出来了，表示货架1的序贯平方和的值很小，表明这个变量很有可能是对估计营养级别是没有用的。</p>
<h3 id="偏f检验">3.3 偏F检验</h3>
<p>假设模型中已经有了p个变量， <span class="math inline">\(x_1,x_2,x_3,....x_p,\)</span> 一个新的变量x<em>是否应该包含在此模型中？应该计算将x</em>加入到给定含有p个变量的模型中所产生的额外序列平方和，这个值表示为: <span class="math display">\[
 SS_{extra}=SS(x*|x_1,x_2,x_3,....x_p)。
\]</span></p>
<p>现在,额外序列平方和通过在全模型（包括 <span class="math inline">\(x_1,x_2,x_3,....x_p\)</span> 和x*）中的回归平方和计算得到，表示为 <span class="math inline">\(SS_{full}=SS(x_1,x_2,x_3,....x_p,x*)\)</span> ,从全模型的回归平方和中减速缩减模型（仅包含 <span class="math inline">\(x_1,x_2,x_3,....x_p\)</span>）的回归平方和（表示为：<span class="math inline">\(SS_{reduced}=SS(x_1,x_2,x_3,....x_p)\)</span> ），也即：</p>
<p><span class="math display">\[
      SS_{extra}=SS_{full}-SS_{reduced}
 \]</span></p>
<p>即：</p>
<p><span class="math display">\[
   SS(x*|x_1,x_2,....x_p)= SS(x_1,x_2,....x_p,x^*)-SS(x_1,x_2,..x_p)
\]</span></p>
<p>偏F检验的原假设如下：</p>
<ul>
<li><p>H0:否定 <span class="math inline">\(SS_{extra}\)</span>与 <span class="math inline">\(x^*\)</span> 是相关的，对已经包含 <span class="math inline">\(x_1,x_2,x_3,....x_p\)</span> 的模型的回归平方和没有显著的共享。因此，模型中不应该包含 <span class="math inline">\(x^*\)</span> 。</p></li>
<li><p>H1:肯定SSextra与x<em>是相关的，对已经包含x1,x2,x3,....xp的模型的回归平方和有显著的贡献。因此，模型中应该包含x</em></p></li>
</ul>
<p>偏F检验的测试统计量是:</p>
<p>$$ F(x^*|x_1,x_2,...x_p)=</p>
<p>MSE_{full}代表全模型的均方误差，包括x_1,x_2,...x_p和x^* $$</p>
<p>当假设为真时，这个统计量服从 <span class="math inline">\(F_{1,n-p-2}\)</span> 的分布。因此，当 <span class="math inline">\(F(x^*\|x_1,x_2,x_3,....x_p)\)</span> 值太大或者它像对应的p值太小时，有理由拒绝原假设。而偏F检验的一个可替代的方法是t检验。一个自由度为1和n-p-2的F检验等价于一个自由度为n-p-2的t检验。这是由他们之间的概率分布关系 <span class="math inline">\((F_{1,n-p-2}=(t_{n-p-2})^2)\)</span></p>
<p><font color="blue">注意：</font>序贯平方和与部分平方和的区别如下：</p>
<table>
<thead>
<tr class="header">
<th>变量</th>
<th>序贯平方和</th>
<th>部分平方和</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(x_1\)</span></td>
<td><span class="math inline">\(SS(x_1)\)</span></td>
<td><span class="math inline">\(SS(x_1\|x_2,x_3,x_4)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(x_2\)</span></td>
<td><span class="math inline">\(SS(x_2\|x_1)\)</span></td>
<td><span class="math inline">\(SS(x_2\|x_1,x_3,x_4)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(x_3\)</span></td>
<td><span class="math inline">\(SS(x_3\|x_1,x_2)\)</span></td>
<td><span class="math inline">\(SS(x_2\|x_1,x_2,x_4)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(x_4\)</span></td>
<td><span class="math inline">\(SS(x_4\|x_1,x_2,x_3)\)</span></td>
<td><span class="math inline">\(SS(x_2\|x_1,x_2,x_3)\)</span></td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://shartoo.github.com/2019/12/23/2013-04-20-datamining-regression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shartoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/23/2013-04-20-datamining-regression/" class="post-title-link" itemprop="url">2013-04-20-datamining-regression</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-23 18:45:59 / Modified: 20:53:35" itemprop="dateCreated datePublished" datetime="2019-12-23T18:45:59+08:00">2019-12-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>title: 数据挖掘方法之二：回归模型（简单线性回归） date: 2013-04-20 17:01:34 categories: - 数据挖掘</p>
<h2 id="注文中所使用代码为r">注：文中所使用代码为R</h2>
<h2 id="一-概念">一 概念</h2>
<p>简单线性回归模型是用于估计一个连续预测变量和一个连续回应变量的线性关系。回归方程或估计回归方程(estimated regression equation,ERE)： <span class="math display">\[\bar y=b_0+b_1x\]</span></p>
<ul>
<li><span class="math inline">\(\bar y\)</span>是回应变量的估计值</li>
<li><span class="math inline">\(b_0\)</span>是回归线在y轴上的截距</li>
<li><span class="math inline">\(b_1\)</span>是回归线的斜率</li>
<li><span class="math inline">\(b_0\)</span>和<span class="math inline">\(b_1\)</span>称为回归系数</li>
</ul>
<h2 id="二-实例">二 实例</h2>
<p>数据来源: <a href="http://lib.stat.cmu.edu/DASL/Datafiles/Cereals.html" target="_blank" rel="noopener">谷物数据集</a><br />
数据描述：谷物数据集,包含了77种早餐谷物的16个属性对应的营养信息<br />
首先导入数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sugar&lt;-read.table(file&#x3D;&quot;&#x2F;LabData&#x2F;RData&#x2F;regression&#x2F;nutrition.txt&quot;,header&#x3D;TRUE)</span><br></pre></td></tr></table></figure>
<p>部分数据概览如下：</p>
<figure class="highlight plain"><figcaption><span>```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![数据集](&#x2F;images&#x2F;blog&#x2F;regression1.png)</span><br><span class="line"></span><br><span class="line">就给定谷物的含糖量对该谷物的营养成分进行评价，77种谷物的营养级别与含糖量的散点图和拟合回归线如下:</span><br></pre></td></tr></table></figure>
<pre><code>plot(data=sugar,rating~sugars,main=&quot;营养级别和含糖量的散点图及拟合线&quot;,xlab=&quot;含糖量&quot;,ylab=&quot;营养级别&quot;)  

lm.reg&lt;-lm(data=sugar,rating~sugars)  

abline(lm.reg,lty=4,lwd=3)   </code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![拟合](&#x2F;images&#x2F;blog&#x2F;regression2.png)</span><br><span class="line"></span><br><span class="line">使用线性回归模型拟合结果如下：</span><br></pre></td></tr></table></figure>
<pre><code>lm(data=sugar,rating~sugars)       
Call:      
lm(formula = rating ~ sugars, data = sugar)      
Coefficients:      
  (Intercept)       sugars        
   59.284       -2.401       </code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line">这里给定ERE为 ： $\bar y&#x3D;59.284-2.401*sugars$， 所以$b_0$&#x3D;59.284,$b_1$&#x3D;-2.401   </span><br><span class="line"></span><br><span class="line">### 误差残留   </span><br><span class="line"></span><br><span class="line"> **问题**：数据集中包含了一个含糖量(sugars&#x3D;1)为1的谷物 cheerios(数据概览中，黑色框部分)，其营养价值是50.765,而非估计值的56.98.</span><br><span class="line">  二者之差也即</span><br><span class="line"></span><br><span class="line">$$y-\bar y&#x3D;56.98-50.765&#x3D;6.215,$$</span><br><span class="line"></span><br><span class="line">称为预测误差(prediction error)、估计误差(estimation error)或者误差残留(residual error)。</span><br><span class="line"></span><br><span class="line">为寻求这种预测误差总体尽可能小，最小二乘回归法会选择一条唯一的回归线，满足使得数据集的整体残差平方和达到最小值。有多重方法可以选择，如中位数回归方法，但最小二乘法回归是最常见的。   </span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">## 三 误差评估</span><br><span class="line"></span><br><span class="line">### 1 最小二乘法估计   </span><br><span class="line"></span><br><span class="line">公式如下：</span><br><span class="line"></span><br><span class="line">$$y&#x3D;m_0+m_1x+e$$</span><br><span class="line">   &lt;font color&#x3D;&quot;blue&quot;&gt;其中误差项e引入用以解释不确定性的因素。&lt;&#x2F;font&gt;</span><br><span class="line"></span><br><span class="line">**基本假设**</span><br><span class="line"></span><br><span class="line">1. 零均值假设：误差项是期望为零的随机变量，即$E(e)&#x3D;0$</span><br><span class="line">2. 不变方差假设：误差项e的方差（用$σ^2$表示）是常数且与 $x_1,x_2,....$ 的值无关</span><br><span class="line">3. 独立性假设：e的变量是相互独立的</span><br><span class="line">4. 正态性假设：误差项e是正态随机变量,也即：误差项e的值是独立的正态分布随机变量，带有均值0和不变方差$σ^2$</span><br><span class="line"></span><br><span class="line">回应变量y的分布:</span><br><span class="line"></span><br><span class="line">(1)根据零假设，回应变量y的值均落在回归线上</span><br><span class="line">(2)根据不变方差假设，不论预测变量x1,x2,..取什么值，y的方差不变</span><br><span class="line">(3)根据独立性假设，对任意的 $x_1,x_2,..$ 取值，y的值都是相互独立的</span><br><span class="line">(4)根据正态性假设，回应变量y也是正态分布的随机变量。也即回应变量y也是独立正态变量，均值不变，方差不变。</span><br><span class="line">最小二乘回归线(least-square line)将误差的平方和最小化，总的预测误差用SSEp表示，则总的误差平方和为：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   SSE_p&#x3D;\sum^n_&#123;i-1&#125;\epsilon^2&#x3D;\sum^n_&#123;i-1&#125;(y_i-\beta_0-\beta_1x_i)^2</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">利用微积分，在以下微积分方程结果为0的时候, $b_0$ 和 $b_1$ 的取值会让总的误差平方和最小。关于 $b_0$ 和 $b_1$ 的偏微分方程为:</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   \frac &#123;\partial SSE_p&#125;&#123;\partial \beta_0&#125;&#x3D;-2\sum^n_&#123;i-1&#125;(y_i-\beta_0-\beta_1x_i)</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   \frac&#123;\partial SSE_p&#125;&#123;\partial \beta_1&#125;&#x3D;-2\sum^n_&#123;i-1&#125;x_i(y_i-\beta_0-\beta_1x_i)</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">令上式为0，则有:&lt;br&gt;</span><br><span class="line">$$</span><br><span class="line">(y_i-\beta_0-\beta_1x_i)&#x3D;0</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">(y_i-\beta_0-\beta_1x_i) &#x3D;0</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">分别求和，得到</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">  \sum^n_&#123;i-1&#125;y_i-nb_0-b_1\sum^a_&#123;i-1&#125;x_i&#x3D;0</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   \sum^n_&#123;i-1&#125;x_iy_i-b_0\sum^n_&#123;i-1&#125;x_i-b_1\sum^n_&#123;i-1&#125;x^2_i&#x3D;0</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">重新表示为：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">  b_0n+b_1\sum^n_&#123;i-1&#125;x_i&#x3D;\sum^n_&#123;i-1&#125;y_i</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   b_0\sum^n_&#123;i-1&#125;x_i+b_i\sum^n_&#123;i-1&#125;x_i^2&#x3D;\sum^n_&#123;i-1&#125;x_iy_i</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">求出 $b_0$ 和 $b_1$ 的值：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">  b_1&#x3D;\frac&#123;\sum x_iy_i-[(\sum x_i)(\sum y_i)]&#x2F;n&#125;&#123;\sum x^2_i-(\sum x_i)^2&#x2F;n&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">  b_0 &#x3D; \bar y-b_1\bar x (\bar x为x 的均值)</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 2 决定系数</span><br><span class="line"></span><br><span class="line">$r^2$ 称为决定系数（coefficient of determination）用来衡量回归线的拟合度，也即最小二乘回归线产生的线性估计与实际观测数据的拟合程度。前面提到y^代表回应变量的估计值，$y-\bar y$ 代表预测误差或残差。</span><br><span class="line"></span><br><span class="line">#### 引子</span><br><span class="line"></span><br><span class="line">1.想象一下，如果不考虑数据集中含糖量而直接预测其营养价值，我们直观的做法是求其平均值作为预测值。假设开始为数据集里的每个记录计算(y-y&#39;)（其中y&#39;为回应变量的平均值），然后计算其平方和，这与计算误差(y-y^)，然后计算误差平方和类似。这时统计量总体误差平方和SST为：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   SST &#x3D;(y_1-y&#39;)^2+(y_2-y&#39;)^2+(y_3-y&#39;)^2....</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">SST，也称为总体平方和(sum of squares total，SST)是在没有考虑预测变量的情况下，衡量回应变量总体变异的统计量。</span><br><span class="line"></span><br><span class="line">2. 接下来是衡量估计回归方程能多大程度提高估计的准确度。运用回归线时的估计误差为： $y-\bar y$  ,当忽略含糖量信息时，估计误差是 $y-y&#39;$ 。因此改进量是：$\bar y-y&#39;$ .进一步基于 $\bar y-y&#39;$ 构造一个平方和的统计量，这样的统计量被称为回归平方和 *(sum of squares of regression,SSR)* ，是相对于忽略预测信息，衡量在使用回归线后预测精度提高的统计量，即：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   SSR &#x3D; (\bar y_1-y&#39;)^2+(\bar y_2-y&#39;)^2+....</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">由: $y-y&#39;&#x3D;(\bar y-y&#39;)+(y-\bar y)$  两边都进行平方，然后进行总和运算，有：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">  SST &#x3D;SSR +SSE</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">#### 结论   </span><br><span class="line"></span><br><span class="line">SST衡量了回应变量变异的一部分，这部分是被回应变量和预测变量之间的线性关系所解释的。然而不是所有的数据点都正好落在回归线上，这意味着还有一部分y变量的变异不能被回归线所解释。SSE可以被认为是衡量不能被x和y之间的回归线所解释的其他变异，包括随机变异。</span><br><span class="line">决定系数 $r^2$ ，它衡量了用回归线来描述预测变量和回应变量之间线性关系的符合程度</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   r^2 &#x3D;\frac&#123;SSR&#125;&#123;SST&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">### 3 估计值的标准误差</span><br><span class="line"></span><br><span class="line">**符号**：*S*</span><br><span class="line"></span><br><span class="line">**概念**：用于衡量由回归线产生估计值的精度的统计量。</span><br><span class="line">为介绍s，首先引入均方误差 *(mean squares error，MSE)* ：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">    MSE &#x3D; \frac&#123;SSE&#125;&#123;n-m-1&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">其中，m标示预测变量的个数，简单线性回归是m&#x3D;1,多元线性回归时m大于1。与 *SSE* 一样， *MSE* 用于衡量在回应变量中没有被回归分析所解释的变异。</span><br><span class="line">标准误差的估计由下式给出:</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   S &#x3D;\sqrt &#123;MSE&#125;&#x3D;\sqrt &#123;SSE&#x2F;(n-m-1)&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line"> *S* 值为“典型”残差的估计，*s* 是衡量估计中的典型误差，即回应预测值与实际值之间的差异。也即标准误差能反应估计回归方程做出预测的精确度，因此 *s* 越小越好。</span><br><span class="line"></span><br><span class="line">### 4 其他评估   </span><br><span class="line"></span><br><span class="line">#### 1. 相关系数</span><br><span class="line"></span><br><span class="line">用来定义两个变量线性关系的统计量称为相关系数 *(correlation coefficient，也称皮尔森相关系数)* ，用来衡量变量之间线性关系强弱。计算公式如下：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   r &#x3D;\frac&#123;\sum (x-x&#39;)(y-y&#39;)&#125;&#123;(n-1)S_xS_y&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">+ 其中 $S_x$和 $S_y$分别代表样本x和y的标准差</span><br><span class="line">+ 相关系数r的取值范围为：(-1,1)</span><br><span class="line">+ 变量r的值越接近于1，表明二者正向相关性越大，随着x增大y也会增大。</span><br><span class="line">+ 变量r的值越接近于-1，表明二者负向相关性越大，随着x增大y会减小。</span><br><span class="line"></span><br><span class="line">#### 2. 方差分析表(ANOVA table)   </span><br><span class="line"></span><br><span class="line">一般形式如下：</span><br><span class="line"></span><br><span class="line">|变异源|平方和( *SS* )|自由度|均方差( *MS* )|F|</span><br><span class="line">|---|---|---|---|---|</span><br><span class="line">|回归| *SSR* | *m* | $MSR &#x3D;\frac&#123;SSR&#125;&#123;m&#125;$ | $F&#x3D; \frac&#123;MSR&#125;&#123;MSE&#125;$ |</span><br><span class="line">|误差| *SSE* | *n-m-1*| $MSE &#x3D;\frac&#123;SSE&#125;&#123;n-m-1&#125;$ ||</span><br><span class="line">|合计| *SST&#x3D;SSR+SSE* | *n-1* |||</span><br><span class="line"></span><br><span class="line">下面展示了 糖含量营养级别回归结果:</span><br></pre></td></tr></table></figure>
<p>anova&lt;-aov(data=sugar,rating~sugars)<br />
summary(anova)<br />
Df Sum Sq Mean Sq F value Pr(&gt;F)<br />
sugars 1 8655 8655 102.3 1.15e-15<br />
Residuals 75 6342 85</p>
<pre><code>sugars      ***  
Residuals        
           ---  </code></pre>
<p>Signif. codes: 0 ‘<em><strong>’ 0.001 ‘</strong>’ 0.01 ‘</em>’ 0.05 ‘.’ 0.1 ‘ ’ 1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 3. 异常点、高杠杠点和强影响观测值   </span><br><span class="line"></span><br><span class="line"> **高杠杆点** *(High leverage point)*：可以被认为是一个观测值在预测空间中的极限，也即一个高杠杆值可以被认为是不考虑y值得x变量的极限。杠杆第i个观察值hi可以被标示如下（x&#39;为平均数）：</span><br><span class="line"></span><br><span class="line"> $$</span><br><span class="line">   h_i &#x3D;\frac&#123;1&#125;&#123;h&#125;+\frac&#123;(x-x&#39;)^2&#125;&#123;\sum (x_i-x&#39;)^2&#125;</span><br><span class="line"> $$</span><br><span class="line"></span><br><span class="line">对于给定数据集,1&#x2F;n和右边分式分母都是常数，所以第i个观察的杠杆只依赖于 $(x_i-x&#39;)^2$。</span><br><span class="line">一个拥有大于 $\frac&#123;2*(m+1)&#125;&#123;n&#125;$ 和 $\frac&#123;3*(m+1)&#125;&#123;n&#125;$ 的观察点被认为是高杠杆点。</span><br><span class="line"></span><br><span class="line">**异常点** 观测到的偏离回归直（曲）线的点。一种粗略的评价观察值的方法是使用标准残留值 *(standardized residuals)*一般用:</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   S_&#123;i,resid&#125;&#x3D;s\sqrt&#123;1-h_i&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">来标示第i个残留数的标准差，则hi代表第i个观测值的杠杆影响，那么标准残留值可以表示为:</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">    r_&#123;i,stand &#125;&#x3D; \frac&#123;(y-y&#39;_i)&#125;&#123;s_&#123;i,resid&#125;&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">如果标准残留值得绝对值超过了2，就可以认为是一个异常点,上图中观测点1和4应该是异常点。</span><br><span class="line"></span><br><span class="line"> **强影响力点** ：对数据集的分析造成较大影响的观测点。通常强影响力观测值同时有较大的残留值和较高的杠杆，但也有可能它既不是异常点也没有较高的杠杆，但两者特点组合成一个具有影响力的点。粗略估算一个观察点是否是强影响力点的方法是看它的Cook距离 *(Cook&#39;s distance)* 是否大于1.0，更确切的说，用Cook距离与F分布 *(m,n-m)* 来比较，若观测值落在分布的第一部分（低于25个百分点），就说它对整体分布只有一点点影响，若落在中点以后就说明该点是有影响力的。Cook距离将残留值和刚刚都考虑进去的，第i个观察点的距离可以为：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   \frac&#123;(y_i-y&#39;_i)^2&#125;&#123;(m+1)S^2&#125;\frac&#123;h_i&#125;&#123;1-h_i&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">其中 $y_i-y&#39;_i$表示第i个残留值，m表示预测变量的个数，s为标准误差的估计，hi为第i个观察点的杠杆。左边的比率含有一个元素代表了残留值，右边的函数代表了杠杆值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 四 回归推断</span><br><span class="line"></span><br><span class="line">最小二乘法回归是建立在一个假设基础上的线性回归模型，我们需要一个系统地框架来评估两个变量之间是否存在线性关系。对于最小二乘法的公式：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">     y &#x3D; m_0+m_1x+e</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">主要有以下四种方法：</span><br><span class="line"></span><br><span class="line">1.用来推断回应变量与预测变量之间关系的t检验法</span><br><span class="line">2. 斜率m1的置信区间</span><br><span class="line">3. 在给定一个特定的预测值条件下，回应变量&lt;B&gt;均值&lt;&#x2F;B&gt;的置信区间</span><br><span class="line">4. 在给定一个特定的预测值条件下，回应变量&lt;B&gt;随机值&lt;&#x2F;B&gt;的预测区间</span><br><span class="line"></span><br><span class="line">### 4.1 x和y之间线性关系的t检验</span><br><span class="line"></span><br><span class="line">对于简单线性回归t检验与F检验是等价的。&lt;br&gt;</span><br><span class="line"></span><br><span class="line">#### 对斜率的估计</span><br><span class="line"></span><br><span class="line">用最小二乘法估计的斜率m&#39;(注意m1是真实斜率)是一个统计量，像所有统计量一样服从一个特定均值和标准差的样本分布.斜率的回归推断是基于m&#39;的样本方差的点估计 Sm&#39;,Sm&#39;被解释为对斜率变异性的衡量指标，较大的Sm&#39;预示着斜率m*的估计是不稳定的。t检验基于统计量 $t&#x3D;(m&#39;-m_1)&#x2F;Sm&#39;$ ,它服从一个自由度为 $n-2$ 的t分布，当零假设为真（变量x和y之间不存在线性关系）时，检验统计量 $t&#x3D;m&#39;&#x2F;Sm&#39;$ 服从一个自由度为 *n-2* 的 t 分布。</span><br><span class="line"></span><br><span class="line">我们重新概览下77种谷物数据中营养级别与含糖量的线性回归结果：</span><br></pre></td></tr></table></figure>
<pre><code> lm.reg&lt;-lm(data=sugar,rating~sugars)  
 summary(lm.reg)  

Call:  
lm(formula = rating ~ sugars, data = sugar)  

Residuals:  
    Min      1Q  Median      3Q     Max   
-17.853  -5.677  -1.439   5.160  34.421   

Coefficients:  
            Estimate Std. Error t value Pr(&gt;|t|)      
(Intercept)  59.2844     1.9485   30.43  &lt; 2e-16 ***  
sugars       -2.4008     0.2373  -10.12 1.15e-15 ***  
---  
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1  

Residual standard error: 9.196 on 75 degrees of freedom  
Multiple R-squared:  0.5771,    Adjusted R-squared:  0.5715   
F-statistic: 102.3 on 1 and 75 DF,  p-value: 1.153e-15</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">我们可以得到：</span><br><span class="line">  + 在系数列下面，找到斜率m&#39;的估计值为 -2.4008。</span><br><span class="line">  + 在SE系数列里找到斜率m&#39;的标准差Sm&#39;为 0.2373</span><br><span class="line">  + 在T值列找到t的统计量，即t检验的值 , $t&#x3D;\frac&#123;m&#39;&#125;&#123;Sm&#39;&#125;&#x3D;\frac&#123;-2.4008&#125;&#123;0.2373&#125;&#x3D;-10.1171$</span><br><span class="line">  + 在最后一列可以找到t检验的p值，是一个双尾检验，形式为：p值&#x3D; $P(|t|&gt;tobs)$ ，其中的tobs代表观测值。此处P值&#x3D; $P(|t|&gt;tobs)&#x3D;P(|t|&gt;-10.1171)$ 近似为0，小于任何显著性要求的合理界限，因此可以拒绝零假设也即认为含糖量和营养级别之前存在线性关系。</span><br><span class="line"></span><br><span class="line">### 4.2 回归直线斜率的置信区间</span><br><span class="line"></span><br><span class="line">置信区间也即在一定概率P下保证变量落在某区间 [a,b]内。对于回归直线的真实斜率 $m_1$来说，*100\*(1-c)%* 的置信区间也即有 100*(1-c)%的把握保证回归线的真实斜率位于 [ $m&#39;-(t_&#123;n-2&#125;)(Sm&#39;),m&#39;+(t_&#123;n-2&#125;)(Sm&#39;)$ ]区间。其中 $t_&#123;n-2&#125;$ 是自由度为n-2的 t 分布。</span><br><span class="line"></span><br><span class="line">例如构建一个回归直线的真实斜率 $m_1$的95%的置信区间。有一个对m1的点估计值 m&#39;&#x3D;-2.4008,对95%的之心去和自由度为 $n-2&#x3D;77-2&#x3D;75$ 的t临界值为 2.0(查表t75.95%&#x3D;2.0),从表中得到 Sm&#39;&#x3D;0.2373，因此置信区间为：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">    [ $m&#39;-(t_&#123;n-2&#125;)(Sm&#39;),m&#39;+(t_&#123;n-2&#125;)(Sm&#39;)$ ]</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">相关代码及结果如下：&lt;br&gt;</span><br></pre></td></tr></table></figure>
<p>lm.reg&lt;-lm(data=sugar,rating~sugars)<br />
#level=0.95为置信度<br />
confint(lm.reg,level=0.95)<br />
2.5 % 97.5 %<br />
(Intercept) 55.402783 63.165952<br />
sugars -2.873567 -1.92807 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 4.3 给定x条件下，y均值的置信区间和y随机选择值的预测区间</span><br><span class="line"></span><br><span class="line">给定x条件下，y&lt;B&gt;均值&lt;&#x2F;B&gt;的置信区间由如下公式判定：</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">  \bar y\pm t_&#123;n-2&#125;(s)\sqrt &#123;\frac&#123;1&#125;&#123;n&#125;+\frac&#123;(x_p-\bar x)^2&#125;&#123;\sum(x_i-\bar x)^2&#125;&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">其中 $\bar y$ 表示给定x值后，y的点估计值，$t_&#123;n-2&#125;$ 是与样本大小和置信水平相关联的乘数，s是估计的标准误差，$\bar x$ 是产生预测值所对应的x专指变量。</span><br><span class="line"></span><br><span class="line">给定x条件下，y随机选择值的预测区间:</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">   \bar y\pm t_&#123;n-2&#125;(s)\sqrt &#123;1+\frac&#123;1&#125;&#123;n&#125;+\frac&#123;(x_p-\bar x)^2&#125;&#123;\sum(x_i-\bar x)^2&#125;&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line"> **注意**：第二张图中表达式与第一张图中表达式相比，除了在平方根李出现了 **&quot;1+&quot;** 外完全一样，这说明比起均值估计来，对于单个y值得估计会有更大的变化范围，这也说明了预测区间总是比类似的置信区间要宽</span><br><span class="line"></span><br><span class="line">我们希望预测含糖量为 sugars&#x3D;10时该谷物的营养级别范围，实例代码如下：</span><br></pre></td></tr></table></figure> &gt; point&lt;-data.frame(sugars=10)<br />
&gt; point<br />
sugars<br />
1 10<br />
&gt; lm.reg</p>
<pre><code>Call:  
lm(formula = rating ~ sugars, data = sugar)  

Coefficients:  
(Intercept)       sugars    
     59.284       -2.401    

&gt; lm.pred&lt;-predict(lm.reg,point,interval=&quot;prediction&quot;,level=0.95)  
&gt; lm.pred  
       fit     lwr      upr  
 1 35.27617 16.7815 53.77083</code></pre>
<p>```</p>
<p>可以看到在95%的置信度下，含糖量为10的谷物其营养级别介于 16.7815和53.77083之间</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://shartoo.github.com/2019/12/23/2013-04-01-dataming-PCA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shartoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/23/2013-04-01-dataming-PCA/" class="post-title-link" itemprop="url">2013-04-01-dataming-PCA</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-23 18:45:59 / Modified: 20:54:11" itemprop="dateCreated datePublished" datetime="2019-12-23T18:45:59+08:00">2019-12-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>title: 数据挖掘方法之一：主成份分析 date: 2013-04-01 17:01:34 categories: - 数据挖掘</p>
<h2 id="一-概念">一 概念</h2>
<p>主成分分析（principle componentsanalysis,PCA）是指将多个变量通过线性组合，选出较少个数的重要变量集合来描述相关结构的额一种统计分析方法，这些线性组合被称为“成分”。由m个变量组成的数据集的总变异，可以由k个线性组合变量组成的子集来标示（k&lt;m）。这意味着k个变量与原来的变量反应了几乎同样多的信息</p>
<h2 id="二-步骤">二 步骤</h2>
<ol type="1">
<li>原始指标数据的标准化采集p维随机向量</li>
</ol>
<p><span class="math display">\[x = (x_1,x_2,...x_p)^T\]</span></p>
<p><span class="math inline">\(n\)</span>个样本 <span class="math inline">\(x_i= (x_{i1},x_{i2},x_{i3},...x_{ip})^T,i=1,2..n, n&gt;p\)</span></p>
<p>构造样本阵，对样本元素进行如下标准化变换</p>
<p><span class="math display">\[Z_{ij}=\frac{x_{ij}-\bar x_j}{s_J},i =1,2,..\pi, j =1,2,...p\]</span></p>
<p>其中<span class="math display">\[\bar x_j =\frac{\sum^n_{i-1}x_{ij}}{n},s^2_j=\frac{\sum^n_{i-1}(x_{ij}-\bar x_j)^2}{n-1}\]</span></p>
<p>得标准化矩阵Z。</p>
<ol start="2" type="1">
<li><p>对标准化矩阵Z求相关系数矩阵</p>
<p><span class="math display">\[R = [r_{ij}] xp =\frac{Z^TZ}{n-1}其中r_{ij}=\frac{\sum z_{kj}\cdot z_{kj}}{n-1}, i,j = 1,2...p\]</span></p></li>
<li><p>求解样本相关矩阵R的特征方程</p>
<span class="math inline">\(R-\lambda I_p =0\)</span> 得 <span class="math inline">\(p\)</span> 个特征根，按 <span class="math display">\[\frac{sum^m_{j-1}\lambda _j}{\sum^p_{j-1}\lambda _j}\geq 0.85
确定n的值，使信息的利用率达85%以上。对每个 $\lambda_j,i=1,2,..m$ 解方程组$R_b= \lambda_jb$得单位特征向量$b^0_j\]</span></li>
<li><p>将标准化后的指标变量转换成主成分。</p>
<p><span class="math inline">\(U_{ij}=z^Tb^0_j,j=1,2,...m\)</span></p>
<p><span class="math inline">\(U_1\)</span>称为第一主成分，<span class="math inline">\(U_2\)</span>称为第二主成分，<span class="math inline">\(U_3\)</span>称为第三主成分，...</p>
<p>对n个主成份进行综合评价。对n个主成份进行加权求和，即得最终评价值，权数为每个主成份的方差贡献率。</p></li>
</ol>
<h2 id="三-关键性结论">三 关键性结论</h2>
<p>以下结论对主成份分析非常重要</p>
<p><strong>结论1</strong>：标准化数据集州农工的总体变动性等于所有Z向量方差之和，等于每个成分方差之和，等于特征权值之和，等于变量的个数。即 <span class="math display">\[
  \sum^m_{i-1}Var(Y_i)=\sum^m_{i-1}Var(Z_i)=\sum^m_{i-1}\lambda _i=m
\]</span></p>
<p><strong>结论2</strong>：给定成分与给定变量间的偏相关性是特征向量与特征值的函数。</p>
<p>具体来说 <span class="math display">\[Corr(Y_i,Z_i)=e_{ii}\sqrt\lambda _i,i,j=1,2,..m,\lambda _1\gt\lambda _2\geq\lambda _3...\geq\lambda _m\]</span> 其中 <span class="math inline">\((\lambda _1,e_1),(\lambda _2,e_2),(\lambda _3,e_3),..(\lambda _m,e_m)\)</span> 是相关系数矩阵p的<font color="gray">特征值-特征向量</font>对，并且偏相关系数包括了所有变量之间的影响。</p>
<p><strong>结论3</strong>：Z中第i个主成份解释了变量的总体变异的百分比，等于第i个特征根与变量个数之间的比率 <span class="math inline">\(\frac{\lambda _i}{m}\)</span></p>
<h2 id="四-应用于实际数据">四 应用于实际数据</h2>
<table>
<thead>
<tr class="header">
<th>字段</th>
<th>类型</th>
<th>最小值</th>
<th>最大值</th>
<th>均值</th>
<th>标准差</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>房屋价值中位数</td>
<td>Range</td>
<td>14999</td>
<td>500001</td>
<td>206918.067</td>
<td>115485.040</td>
</tr>
<tr class="even">
<td>收入中位数</td>
<td>Range</td>
<td>0.500</td>
<td>15.000</td>
<td>3.873</td>
<td>1.906</td>
</tr>
<tr class="odd">
<td>平均房龄中位数</td>
<td>Range</td>
<td>1</td>
<td>52</td>
<td>28.656</td>
<td>12.582</td>
</tr>
<tr class="even">
<td>总房间数</td>
<td>Range</td>
<td>2</td>
<td>37937</td>
<td>2621.653</td>
<td>2131.644</td>
</tr>
<tr class="odd">
<td>总卧室数</td>
<td>Range</td>
<td>1</td>
<td>6445</td>
<td>535.096</td>
<td>413.541</td>
</tr>
<tr class="even">
<td>人口数</td>
<td>Range</td>
<td>3</td>
<td>35682</td>
<td>1418.971</td>
<td>1122.534</td>
</tr>
<tr class="odd">
<td>家庭数</td>
<td>Range</td>
<td>1</td>
<td>6082</td>
<td>479.332</td>
<td>377.378</td>
</tr>
<tr class="even">
<td>北纬</td>
<td>Range</td>
<td>32.540</td>
<td>41.950</td>
<td>35.630</td>
<td>2.137</td>
</tr>
<tr class="odd">
<td>西经</td>
<td>Range</td>
<td>-124.350</td>
<td>-114.310</td>
<td>-119.567</td>
<td>2.003</td>
</tr>
</tbody>
</table>
<p>1.使用上图的均值和标准差对变量进行标准化，得到Z向量。 2.研究下图中变量矩阵图以检验变量间是否存在相关性。 可以看到 总房数、卧室数、人口数和家庭数之间表现出正相关性，西经和北纬表现出负相关性。再来观察变量的相关性矩阵：</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>平均收入</th>
<th>平均房龄</th>
<th>总房数</th>
<th>总卧室数</th>
<th>人口数</th>
<th>家庭数</th>
<th>北纬</th>
<th>西经</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>平均收入</td>
<td>1.000</td>
<td>-0.117</td>
<td>0.199</td>
<td>-0.012</td>
<td>0.002</td>
<td>0.010</td>
<td>-0.083</td>
<td>-0.012</td>
</tr>
<tr class="even">
<td>平均房龄</td>
<td>-0.117</td>
<td>1.000</td>
<td>-0.360</td>
<td>-0.318</td>
<td>-0.292</td>
<td>-0.300</td>
<td>0.011</td>
<td>-0.107</td>
</tr>
<tr class="odd">
<td>总房数</td>
<td>0.199</td>
<td>-0.360</td>
<td>1.000</td>
<td>0.928</td>
<td>0.856</td>
<td>0.919</td>
<td>-0.035</td>
<td>0.041</td>
</tr>
<tr class="even">
<td>总卧室数</td>
<td>-0.012</td>
<td>-0.318</td>
<td>0.928</td>
<td>1.000</td>
<td>0.878</td>
<td>0.981</td>
<td>-0.064</td>
<td>0.064</td>
</tr>
<tr class="odd">
<td>人口数</td>
<td>0.002</td>
<td>-0.292</td>
<td>0.856</td>
<td>0.878</td>
<td>1.000</td>
<td>0.907</td>
<td>-0.107</td>
<td>0.097</td>
</tr>
<tr class="even">
<td>家庭数</td>
<td>0.010</td>
<td>-0.300</td>
<td>0.919</td>
<td>0.981</td>
<td>0.907</td>
<td>1.000</td>
<td>-0.069</td>
<td>0.051</td>
</tr>
<tr class="odd">
<td>北纬</td>
<td>-0.083</td>
<td>0.011</td>
<td>-0.035</td>
<td>-0.064</td>
<td>-0.107</td>
<td>-0.069</td>
<td>1.000</td>
<td>-0.925</td>
</tr>
<tr class="even">
<td>西经</td>
<td>-0.012</td>
<td>-0.107</td>
<td>0.041</td>
<td>0.064</td>
<td>0.097</td>
<td>0.051</td>
<td>-0.925</td>
<td>1.000</td>
</tr>
</tbody>
</table>
<p>矩阵图和相关矩阵式常用的两种方法，用来观察预测变量之间的相关性结构。<br />
如果完成一次住房价预测的多元回归分析，但不考虑数据集中的多重共线性将导致回归结果非常不稳定，预测值的微小变化将会导致回归系数的极大变化，而得不到任何结论。此时需要用主成分分析，其可以通过相关化结构，确定相关变量的基本组成部分 3. 采用主成分分析对房屋数据集进行分析，该要素矩阵（下图）中每个栏目代表成分Yi=e'Z中的一项。栏目中元素为成分的权重，代表了变量与成分的偏相关。结论2 表明这些成分的权重等于Corr(Yi,Zi),成分涉及第i个特征向量和特征值</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>平均收入</td>
<td>0.086</td>
<td>-0.058</td>
<td>0.922</td>
<td>0.370</td>
<td>-0.02</td>
<td>-0.018</td>
<td>0.037</td>
<td>-0.004</td>
</tr>
<tr class="even">
<td>平均房龄</td>
<td>-0.429</td>
<td>0.025</td>
<td>-0.407</td>
<td>0.806</td>
<td>0.014</td>
<td>0.026</td>
<td>0.009</td>
<td>-0.001</td>
</tr>
<tr class="odd">
<td>总房数</td>
<td>0.956</td>
<td>0.100</td>
<td>0.102</td>
<td>0.104</td>
<td>0.120</td>
<td>0.162</td>
<td>-0.119</td>
<td>0.015</td>
</tr>
<tr class="even">
<td>总卧室数</td>
<td>0.970</td>
<td>0.083</td>
<td>-0.121</td>
<td>0.056</td>
<td>0.144</td>
<td>-0.068</td>
<td>0.051</td>
<td>-0.083</td>
</tr>
<tr class="odd">
<td>人口数</td>
<td>0.933</td>
<td>0.034</td>
<td>-0.121</td>
<td>0.076</td>
<td>-0.327</td>
<td>0.034</td>
<td>0.006</td>
<td>-0.015</td>
</tr>
<tr class="even">
<td>家庭数</td>
<td>0.972</td>
<td>0.086</td>
<td>-0.113</td>
<td>0.087</td>
<td>0.058</td>
<td>-0.112</td>
<td>0.061</td>
<td>0.083</td>
</tr>
<tr class="odd">
<td>北纬</td>
<td>-0.140</td>
<td>0.970</td>
<td>0.017</td>
<td>-0.088</td>
<td>0.017</td>
<td>0.132</td>
<td>0.113</td>
<td>0.005</td>
</tr>
<tr class="even">
<td>西经</td>
<td>0.144</td>
<td>-0.969</td>
<td>-0.062</td>
<td>-0.063</td>
<td>0.037</td>
<td>0.136</td>
<td>0.109</td>
<td>0.007</td>
</tr>
</tbody>
</table>
<ol start="4" type="1">
<li>结论3表明，Z的总变异种第i个主成分所占的比例是ri/m(其中ri是特征值)，即第i个特征值与变量数的比例。由下图可以看出，第一特征值是 3.091,因为有8个预测变量，第一主成分解释 <span class="math inline">\(\frac{3.091}{8}=48.767\)</span> 的变异。</li>
</ol>
<table>
<thead>
<tr class="header">
<th>成分</th>
<th>合计</th>
<th>变化百分比</th>
<th>累计百分比%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>3.901</td>
<td>48.767</td>
<td>48.767</td>
</tr>
<tr class="even">
<td>2</td>
<td>1.910</td>
<td>23.881</td>
<td>72.648</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1.073</td>
<td>13.409</td>
<td>86.057</td>
</tr>
<tr class="even">
<td>4</td>
<td>0.825</td>
<td>10.311</td>
<td>96.368</td>
</tr>
<tr class="odd">
<td>5</td>
<td>0.148</td>
<td>1.847</td>
<td>98.215</td>
</tr>
<tr class="even">
<td>6</td>
<td>0.082</td>
<td>1.020</td>
<td>99.235</td>
</tr>
<tr class="odd">
<td>7</td>
<td>0.047</td>
<td>0.586</td>
<td>99.821</td>
</tr>
<tr class="even">
<td>8</td>
<td>0.014</td>
<td>0.179</td>
<td>100.00</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">shartoo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">98</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shartoo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
